<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="display.css" />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Medicine Display</title>
    </head>
    <body>
        <div class="container">
            <div class="display-main-container label-container">
                <div class="label">Id</div>
                <div class="label">Name</div>
                <div class="label">Species</div>
                <div class="label">Dose (mg/kg), Frequency, Route</div>
                <div class="label">Remarks</div>
                <button class="btn primary" onclick="location.href='../index.html'">Home</button>
            </div>
            <div class="display-main-container data-container"></div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const queryParams = new URLSearchParams(window.location.search)
                const name = queryParams.get('name')
                const species = queryParams.get('species')

                fetch(`http://localhost:3000/medicine?name=${name}&species=${species}`)
                    .then((response) => response.json())
                    .then((data) => {
                        const container = document.querySelector('.data-container')
                        data.forEach((entry) => {
                            container.innerHTML += `
                                <div class="data">${entry.id}</div>
                                <div class="data">${entry.name}</div>
                                <div class="data">${entry.species}</div>
                                <div class="data">${entry.dose}</div>
                                <div class="data remarks">${entry.remarks}</div>
                            `
                        })
                    })
                    .catch((error) => {
                        console.error('Error:', error)
                        alert('Error retrieving data')
                    })
            })
        </script>
    </body>
</html>
